<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Basics of randomness and simulation</h1><p class="page-description">This chapter gives you the tools required to run a simulation. We'll start with a review of random variables and probability distributions. We will then learn how to run a simulation by first looking at a simulation workflow and then recreating it in the context of a game of dice. Finally, we will learn how to use simulations for making decisions. This is the Summary of lecture "Statistical Simulation in Python", via datacamp.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-06-21T00:00:00-05:00" itemprop="datePublished">
        Jun 21, 2020
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Chanseok Kang</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      8 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#Python">Python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Datacamp">Datacamp</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Statistics">Statistics</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Modeling">Modeling</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/goodboychan/goodboychan.github.io/tree/main/_notebooks/2020-06-21-02-Basics-of-randomness-and-simulation.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/goodboychan/goodboychan.github.io/main?filepath=_notebooks%2F2020-06-21-02-Basics-of-randomness-and-simulation.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/goodboychan/goodboychan.github.io/blob/main/_notebooks/2020-06-21-02-Basics-of-randomness-and-simulation.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Fgoodboychan%2Fgoodboychan.github.io%2Fblob%2Fmain%2F_notebooks%2F2020-06-21-02-Basics-of-randomness-and-simulation.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#Introduction-to-random-variables">Introduction to random variables </a></li>
<li class="toc-entry toc-h3"><a href="#Poisson-random-variable">Poisson random variable </a></li>
<li class="toc-entry toc-h3"><a href="#Shuffling-a-deck-of-cards">Shuffling a deck of cards </a></li>
<li class="toc-entry toc-h2"><a href="#Simulation-basics">Simulation basics </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Throwing-a-fair-die">Throwing a fair die </a></li>
<li class="toc-entry toc-h3"><a href="#Throwing-two-fair-dice">Throwing two fair dice </a></li>
<li class="toc-entry toc-h3"><a href="#Simulating-the-dice-game">Simulating the dice game </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Using-simulation-for-decision-making">Using simulation for decision-making </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Simulating-one-lottery-drawing">Simulating one lottery drawing </a></li>
<li class="toc-entry toc-h3"><a href="#Should-we-buy?">Should we buy? </a></li>
<li class="toc-entry toc-h3"><a href="#Calculating-a-break-even-lottery-price">Calculating a break-even lottery price </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-06-21-02-Basics-of-randomness-and-simulation.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'figure.figsize'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Introduction-to-random-variables">
<a class="anchor" href="#Introduction-to-random-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction to random variables<a class="anchor-link" href="#Introduction-to-random-variables"> </a>
</h3>
<ul>
<li>Continous Random Variables<ul>
<li>Infinitely many possible values (e.g., Height, Weights)</li>
</ul>
</li>
<li>Discrete Random Variables<ul>
<li>Finite set of possible values (e.g., Outcomes of a six-sided die)</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Poisson-random-variable">
<a class="anchor" href="#Poisson-random-variable" aria-hidden="true"><span class="octicon octicon-link"></span></a>Poisson random variable<a class="anchor-link" href="#Poisson-random-variable"> </a>
</h3>
<p>The <code>numpy.random</code> module also has a number of useful probability distributions for both discrete and continuous random variables. In this exercise, you will learn how to draw samples from a probability distribution.</p>
<p>In particular, you will draw samples from a very important discrete probability distribution, the Poisson distribution, which is typically used for modeling the average rate at which events occur.</p>
<p>Following the exercise, you should be able to apply these steps to any of the probability distributions found in <code>numpy.random</code>. In addition, you will also see how the sample mean changes as we draw more samples from a distribution.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">lam</span><span class="p">,</span> <span class="n">size_1</span><span class="p">,</span> <span class="n">size_2</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">100</span>

<span class="c1"># Draw samples &amp; calculate absolute difference between lambda and sample mean</span>
<span class="n">samples_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">poisson</span><span class="p">(</span><span class="n">lam</span><span class="p">,</span> <span class="n">size_1</span><span class="p">)</span>
<span class="n">samples_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">poisson</span><span class="p">(</span><span class="n">lam</span><span class="p">,</span> <span class="n">size_2</span><span class="p">)</span>
<span class="n">answer_1</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">lam</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">samples_1</span><span class="p">))</span>
<span class="n">answer_2</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">lam</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">samples_2</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"|Lambda - sample mean| with </span><span class="si">{}</span><span class="s2"> samples is </span><span class="si">{}</span><span class="s2"> and with </span><span class="si">{}</span><span class="s2"> samples is </span><span class="si">{}</span><span class="s2">. "</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">size_1</span><span class="p">,</span> 
                                                                                        <span class="n">answer_1</span><span class="p">,</span> 
                                                                                        <span class="n">size_2</span><span class="p">,</span> 
                                                                                        <span class="n">answer_2</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>|Lambda - sample mean| with 3 samples is 0.33333333333333304 and with 100 samples is 0.11000000000000032. 
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Shuffling-a-deck-of-cards">
<a class="anchor" href="#Shuffling-a-deck-of-cards" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shuffling a deck of cards<a class="anchor-link" href="#Shuffling-a-deck-of-cards"> </a>
</h3>
<p>Often times we are interested in randomizing the order of a set of items. Consider a game of cards where you first shuffle the deck of cards or a game of scrabble where the letters are first mixed in a bag. As the final exercise of this section, you will learn another useful function - <code>np.random.shuffle()</code>. This function allows you to randomly shuffle a sequence in place. At the end of this exercise, you will know how to shuffle a deck of cards or any sequence of items.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">deck_of_cards</span><span class="p">)</span>

<span class="c1"># Print out the top three cars</span>
<span class="n">card_choices_after_shuffle</span> <span class="o">=</span> <span class="n">deck_of_cards</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">card_choices_after_shuffle</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[('Spade', 2), ('Heart', 9), ('Diamond', 3)]
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Simulation-basics">
<a class="anchor" href="#Simulation-basics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simulation basics<a class="anchor-link" href="#Simulation-basics"> </a>
</h2>
<ul>
<li>Simulations<ul>
<li>Framework for modeling real-world events<ul>
<li>Characterized by repeated random sampling</li>
<li>Gives us an approximate solution</li>
<li>Can help solve complex problems</li>
</ul>
</li>
</ul>
</li>
<li>Simulation steps<ol>
<li>Define possible outcomes for random variables</li>
<li>Assign probabilities</li>
<li>Define relationships between random variables</li>
<li>Get multiple outcomes by repeated random sampling</li>
<li>Analyze sample outcomes</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Throwing-a-fair-die">
<a class="anchor" href="#Throwing-a-fair-die" aria-hidden="true"><span class="octicon octicon-link"></span></a>Throwing a fair die<a class="anchor-link" href="#Throwing-a-fair-die"> </a>
</h3>
<p>Once you grasp the basics of designing a simulation, you can apply it to any system or process. Next, we will learn how each step is implemented using some basic examples.</p>
<p>As we have learned, simulation involves repeated random sampling. The first step then is to get one random sample. Once we have that, all we do is repeat the process multiple times. This exercise will focus on understanding how we get one random sample. We will study this in the context of throwing a fair six-sided die.</p>
<p>By the end of this exercise, you will be familiar with how to implement the first two steps of running a simulation - defining a random variable and assigning probabilities.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">die</span><span class="p">,</span> <span class="n">probabilities</span><span class="p">,</span> <span class="n">throws</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">],</span> <span class="mi">1</span>

<span class="c1"># Use np.random.choice to throw the die once and record the outcome</span>
<span class="n">outcome</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">die</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">throws</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">probabilities</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Outcome of the throw: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">outcome</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Outcome of the throw: 5
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Throwing-two-fair-dice">
<a class="anchor" href="#Throwing-two-fair-dice" aria-hidden="true"><span class="octicon octicon-link"></span></a>Throwing two fair dice<a class="anchor-link" href="#Throwing-two-fair-dice"> </a>
</h3>
<p>We now know how to implement the first two steps of a simulation. Now let's implement the next step - defining the relationship between random variables.</p>
<p>Often times, our simulation will involve not just one, but multiple random variables. Consider a game where throw you two dice and win if each die shows the same number. Here we have two random variables - the two dice - and a relationship between each of them - we win if they show the same number, lose if they don't. In reality, the relationship between random variables can be much more complex, especially when simulating things like weather patterns.</p>
<p>By the end of this exercise, you will be familiar with how to implement the third step of running a simulation - defining relationships between random variables.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">223</span><span class="p">)</span>
<span class="c1"># Initialize number of dice, simulate &amp; record outcome</span>
<span class="n">die</span><span class="p">,</span> <span class="n">probabilities</span><span class="p">,</span> <span class="n">num_dice</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">],</span> <span class="mi">2</span>
<span class="n">outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">die</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">num_dice</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">probabilities</span><span class="p">)</span> 

<span class="c1"># Win if the two dice show the same number</span>
<span class="k">if</span> <span class="n">outcomes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">outcomes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> 
    <span class="n">answer</span> <span class="o">=</span> <span class="s1">'win'</span> 
<span class="k">else</span><span class="p">:</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="s1">'lose'</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"The dice show </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2">. You </span><span class="si">{}</span><span class="s2">!"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">outcomes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">outcomes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">answer</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The dice show 5 and 5. You win!
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Simulating-the-dice-game">
<a class="anchor" href="#Simulating-the-dice-game" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simulating the dice game<a class="anchor-link" href="#Simulating-the-dice-game"> </a>
</h3>
<p>We now know how to implement the first three steps of a simulation. Now let's consider the next step - repeated random sampling.</p>
<p>Simulating an outcome once doesn't tell us much about how often we can expect to see that outcome. In the case of the dice game from the previous exercise, it's great that we won once. But suppose we want to see how many times we can expect to win if we played this game multiple times, we need to repeat the random sampling process many times. Repeating the process of random sampling is helpful to understand and visualize inherent uncertainty and deciding next steps.</p>
<p>Following this exercise, you will be familiar with implementing the fourth step of running a simulation - sampling repeatedly and generating outcomes.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">223</span><span class="p">)</span>
<span class="c1"># Initialize model parameters &amp; simulate dice throw</span>
<span class="n">die</span><span class="p">,</span> <span class="n">probabilities</span><span class="p">,</span> <span class="n">num_dice</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">],</span> <span class="mi">2</span>
<span class="n">sims</span><span class="p">,</span> <span class="n">wins</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sims</span><span class="p">):</span>
    <span class="n">outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">die</span><span class="p">,</span> <span class="n">num_dice</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">probabilities</span><span class="p">)</span> 
    <span class="c1"># Increment `wins` by 1 if the dice show same number</span>
    <span class="k">if</span> <span class="n">outcomes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">outcomes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> 
        <span class="n">wins</span> <span class="o">=</span> <span class="n">wins</span> <span class="o">+</span> <span class="mi">1</span> 

<span class="nb">print</span><span class="p">(</span><span class="s2">"In </span><span class="si">{}</span><span class="s2"> games, you win </span><span class="si">{}</span><span class="s2"> times"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sims</span><span class="p">,</span> <span class="n">wins</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>In 100 games, you win 25 times
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Using-simulation-for-decision-making">
<a class="anchor" href="#Using-simulation-for-decision-making" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using simulation for decision-making<a class="anchor-link" href="#Using-simulation-for-decision-making"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Simulating-one-lottery-drawing">
<a class="anchor" href="#Simulating-one-lottery-drawing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simulating one lottery drawing<a class="anchor-link" href="#Simulating-one-lottery-drawing"> </a>
</h3>
<p>In the last three exercises of this chapter, we will be bringing together everything you've learned so far. We will run a complete simulation, take a decision based on our observed outcomes, and learn to modify inputs to the simulation model.</p>
<p>We will use simulations to figure out whether or not we want to buy a lottery ticket. Suppose you have the opportunity to buy a lottery ticket which gives you a shot at a grand prize of \$ 1 Million. Since there are 1000 tickets in total, your probability of winning is 1 in 1000. Each ticket costs \\$ 10. Let's use our understanding of basic simulations to first simulate one drawing of the lottery.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="c1"># Pre-defined constant variables</span>
<span class="n">lottery_ticket_cost</span><span class="p">,</span> <span class="n">num_tickets</span><span class="p">,</span> <span class="n">grand_prize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1000000</span>

<span class="c1"># Probability of winning</span>
<span class="n">chance_of_winning</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">num_tickets</span>

<span class="c1"># Simulate a single drawing of the lottery</span>
<span class="n">gains</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">lottery_ticket_cost</span><span class="p">,</span> <span class="n">grand_prize</span><span class="o">-</span><span class="n">lottery_ticket_cost</span><span class="p">]</span>
<span class="n">probability</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">chance_of_winning</span><span class="p">,</span> <span class="n">chance_of_winning</span><span class="p">]</span>
<span class="n">outcome</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">gains</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">probability</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Outcome of one drawing of the lottery is </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">outcome</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Outcome of one drawing of the lottery is [-10]
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Should-we-buy?">
<a class="anchor" href="#Should-we-buy?" aria-hidden="true"><span class="octicon octicon-link"></span></a>Should we buy?<a class="anchor-link" href="#Should-we-buy?"> </a>
</h3>
<p>In the last exercise, we simulated the random drawing of the lottery ticket once. In this exercise, we complete the simulation process by repeating the process multiple times.</p>
<p>Repeating the process gives us multiple outcomes. We can think of this as multiple universes where the same lottery drawing occurred. We can then determine the average winnings across all these universes. If the average winnings are greater than what we pay for the ticket then it makes sense to buy it, otherwise, we might not want to buy the ticket.</p>
<p>This is typically how simulations are used for evaluating business investments. After completing this exercise, you will have the basic tools required to use simulations for decision-making.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="c1"># Initialize size and simulate outcome</span>
<span class="n">lottery_ticket_cost</span><span class="p">,</span> <span class="n">num_tickets</span><span class="p">,</span> <span class="n">grand_prize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1000000</span>
<span class="n">chance_of_winning</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">num_tickets</span>
<span class="n">size</span> <span class="o">=</span> <span class="mi">2000</span>
<span class="n">payoffs</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">lottery_ticket_cost</span><span class="p">,</span> <span class="n">grand_prize</span> <span class="o">-</span> <span class="n">lottery_ticket_cost</span><span class="p">]</span>
<span class="n">probs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">chance_of_winning</span><span class="p">,</span> <span class="n">chance_of_winning</span><span class="p">]</span>

<span class="n">outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">payoffs</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">probs</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mean of outcomes.</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">outcomes</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Average payoff from </span><span class="si">{}</span><span class="s2"> simulations = </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Average payoff from 2000 simulations = 1990.0
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Calculating-a-break-even-lottery-price">
<a class="anchor" href="#Calculating-a-break-even-lottery-price" aria-hidden="true"><span class="octicon octicon-link"></span></a>Calculating a break-even lottery price<a class="anchor-link" href="#Calculating-a-break-even-lottery-price"> </a>
</h3>
<p>Simulations allow us to ask more nuanced questions that might not necessarily have an easy analytical solution. Rather than solving a complex mathematical formula, we directly get multiple sample outcomes. We can run experiments by modifying inputs and studying how those changes impact the system. For example, once we have a moderately reasonable model of global weather patterns, we could evaluate the impact of increased greenhouse gas emissions.</p>
<p>In the lottery example, we might want to know how expensive the ticket needs to be for it to not make sense to buy it. To understand this, we need to modify the ticket cost to see when the expected payoff is negative.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">333</span><span class="p">)</span>
<span class="c1"># Initialize simulations and cost of ticket</span>
<span class="n">sims</span><span class="p">,</span> <span class="n">lottery_ticket_cost</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">,</span> <span class="mi">0</span>

<span class="c1"># Use a while loop to increment `lottery_ticket_cost` till average value of outcomes falls below zero</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="o">-</span><span class="n">lottery_ticket_cost</span><span class="p">,</span> <span class="n">grand_prize</span><span class="o">-</span><span class="n">lottery_ticket_cost</span><span class="p">],</span>
                 <span class="n">size</span><span class="o">=</span><span class="n">sims</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="n">chance_of_winning</span><span class="p">,</span> <span class="n">chance_of_winning</span><span class="p">],</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">outcomes</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">lottery_ticket_cost</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">lottery_ticket_cost</span> <span class="o">-</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"The highest price at which it makes sense to buy the ticket is </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The highest price at which it makes sense to buy the ticket is 9
</pre>
</div>
</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="goodboychan/goodboychan.github.io"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/python/datacamp/statistics/modeling/2020/06/21/02-Basics-of-randomness-and-simulation.html" hidden></a>
</article>